web:
  build: .
  command: foreman start
  ports:
    - "5000:5000"
  volumes:
    - .:/app
  links:
    - database
    - redis
    - tika
    - elasticsearch
  environment:
    RESQUE_SERVER_OPEN: true
    ELASTICSEARCH_URL: http://elasticsearch:9200/
    REDIS_URL: redis://redis:6379
    DATABASE_URL: postgres://kleineanfragen:@database/kleineanfragen
    TIKA_SERVER_URL: http://tika:9998/tika

database:
  image: postgres
  environment:
    POSTGRES_USER: kleineanfragen
# ports:
#   - "5432:5432"

redis:
  image: redis

## FIXME: use matts image when released
tika:
  image: logicalspark/docker-tikaserver
# ports:
#   - "9998:9998"

elasticsearch:
  image: dockerfile/elasticsearch
# ports:
#   - "9200:9200"

## FIXME: add image for nomenklatura